import{j as t}from"./jsx-runtime.9234c96e.js";import{r as i}from"./index.2f694c94.js";import{S as l}from"./VolumeButton_module.a39092d9.70cfa7b6.js";function y(e){const n=()=>{window.speechSynthesis.pause(),window.speechSynthesis.cancel(),window.speechSynthesis.resume();const s=new SpeechSynthesisUtterance(e.text);s.voice=e.voice||null,s.rate=e.rate===void 0?1:e.rate,s.volume=e.volume===void 0?.5:e.volume,s.addEventListener("end",()=>{e.onReadCompleted&&e.onReadCompleted()}),window.speechSynthesis.speak(s),e.onReadStarted&&e.onReadStarted()};return t.jsx("button",{onClick:n,className:l.volumeButton,children:e.displayText})}function v(e){e.animate([{clipPath:"inset(0 100% 0 0)"},{clipPath:"inset(0 0% 0 0)"}],{duration:600})}function P(e){const[n,s]=i.useState(60),[w,c]=i.useState("paused"),[d,C]=i.useState(null),[r,T]=i.useState(1.5),[o,f]=i.useState(e.style??"win11"),[m,h]=i.useState(null),a=i.useRef(null),u=o==="win10"?`volume ${n}%`:`${n}%, volume`,p=o==="win10"?`volume ${n-10}%`:`${n-10}%, volume`,j=()=>{a.current&&v(a.current),h(u),s(Math.min(100,n+5)),c("playing")},R=()=>{a.current&&v(a.current),h(p),s(Math.max(10,n-5)),c("playing")},S=()=>{c("paused")},g=()=>{f(o==="win10"?"win11":"win10")},x=o==="win10"?"'Volume' first (Win10 style)":"Percentage first (Win11 style)",N=!e.style;return t.jsxs("figure",{className:l.volumeSimulator,"aria-label":x,children:[t.jsxs("div",{className:l.volumeStatus,children:[t.jsx("pre",{className:l.volumeOutput,children:m?t.jsx("span",{ref:a,children:m}):t.jsx("span",{className:l.placeholder,children:u})}),t.jsx("div",{className:l.playing,children:w==="playing"?t.jsx("span",{title:"Playing",style:{cursor:"default"},children:"ðŸ”Š"}):t.jsx("span",{style:{opacity:.2,cursor:"default"},title:"Not playing",children:"ðŸ”ˆ"})})]}),t.jsxs("div",{className:l.buttonGroup,children:[t.jsx(y,{displayText:"-",voice:d,rate:r,volume:(n-5)/100,text:p,onReadStarted:R,onReadCompleted:S}),t.jsx(y,{displayText:"+",voice:d,rate:r,volume:n/100,text:u,onReadStarted:j,onReadCompleted:S})]}),t.jsx("div",{className:l.volumeOptions,children:t.jsxs("div",{style:{display:"flex",gap:"0.2rem"},children:[x,N?t.jsx("button",{title:o==="win10"?"Switch to Win11 style":"Switch to Win10 style",onClick:g,children:"ðŸ”„"}):null]})})]})}export{P as default};

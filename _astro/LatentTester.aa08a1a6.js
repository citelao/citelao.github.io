import{j as e}from"./jsx-runtime.7d759e48.js";import{r as i}from"./index.8365acb2.js";import{S as d}from"./LatentTextarea_module.e640cc21.0245202e.js";import M from"./LatentTextarea.f1a01c23.js";function S(t,h,n){if(h==="repeated"){if(n===void 0)throw new Error("Define both base latency & step latency please");const s=n+t,f=Math.random();return f<.33?[n,s]:f<.66?[s,n]:[n,n]}const c=Math.floor(Math.random()*100),j=Math.random()<.33?0:1,r=h==="ms"?t:c*(t/100),u=c+j*r;return Math.random()>.5?[u,c]:[c,u]}function k(t){const[h,n]=i.useState("test"),c=S(t.stepMsOrPercent||50,t.mode||"ms",t.baseLatencyMs),[a,j]=i.useState(c[0]),[r,u]=i.useState(c[1]),[s,f]=i.useState([]),[x,y]=i.useState([]),[o,L]=i.useState([]),p=l=>{f([...s,l]),a===r?(L([...o,"same"]),y([...x,[a,r]])):a<r?(L([...o,"a"]),y([...x,[a,r]])):(L([...o,"b"]),y([...x,[a,r]]));const m=S(t.stepMsOrPercent||50,t.mode,t.baseLatencyMs);j(m[0]),u(m[1]),n("result")},v=()=>{if(h==="test")return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.flex,children:[e.jsxs("div",{className:d.group,children:[e.jsx(M,{latencyMs:a,showLatency:!1,showMeasuredLatency:!1}),e.jsx("h2",{children:"A"})]}),e.jsxs("div",{className:d.group,children:[e.jsx(M,{latencyMs:r,showLatency:!1,showMeasuredLatency:!1}),e.jsx("h2",{children:"B"})]})]}),e.jsxs("div",{className:d.flex,children:[e.jsx("button",{onClick:()=>{p("a")},children:"A is faster"}),e.jsx("button",{onClick:()=>{p("same")},children:"A & B are the same speed"}),e.jsx("button",{onClick:()=>{p("b")},children:"B is faster"})]})]});{const l=s.length-1,m=s.filter((A,B)=>A===o[B]).length/s.length,[w,g]=x[l];return e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:s[l]===o[l]?"Correct!":"Incorrect :("}),e.jsxs("p",{children:["Correct rate: ",Math.floor(m*100),"%"]}),e.jsxs("p",{children:[s?`You selected ${s}. `:"",o?`The answer was ${o}.`:"","(A: ",w,"ms; B: ",g,"ms)"]}),e.jsx("button",{onClick:()=>{n("test")},children:"Next"})]})}};return e.jsxs("figure",{className:d.latentTester,children:[e.jsx("figcaption",{children:"Latency tester"}),v()]})}export{k as default};
